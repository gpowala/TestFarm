<div class="dialog-overlay" (click)="onClose()">
  <div class="dialog-container user-profile-dialog" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <h2 class="dialog-title">User Profile</h2>
      <button class="close-btn" (click)="onClose()" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <div class="dialog-content">
      <div class="user-info" *ngIf="user">
        <div class="user-avatar">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
            <path d="M 12.003906 0.99609375 C 9.958276 0.99609375 8.000908 1.8297512 6.5234375 3.0429688 C 5.3610662 3.997444 4.4749774 5.2026171 4.1464844 6.5078125 A 0.750075 0.750075 0 0 0 4.0703125 6.8496094 C 4.0610069 6.903562 4.0522358 6.9574843 4.0449219 7.0117188 C 3.4680008 7.0411796 3.0058594 7.5124843 3.0058594 8.09375 L 3.0058594 11.90625 C 3.0058594 12.47237 3.4462776 12.929098 4.0019531 12.980469 L 4.0019531 15.359375 C 4.0019531 16.21407 4.3620703 16.98096 4.9003906 17.574219 C 5.303554 18.018527 5.8023835 18.382447 6.3554688 18.685547 A 0.75013288 0.75013288 0 0 0 6.3730469 18.75 C 7.2110063 21.206592 9.4055478 23.003906 12.003906 23.003906 C 14.601419 23.003906 16.797778 21.205084 17.634766 18.748047 A 0.750075 0.750075 0 0 0 17.652344 18.685547 C 18.204918 18.382454 18.702588 18.018561 19.105469 17.574219 C 19.643414 16.980911 20.005859 16.213878 20.005859 15.359375 L 20.005859 12.978516 C 20.562675 12.928275 21.005859 12.473181 21.005859 11.90625 L 21.005859 8.09375 C 21.005859 7.5116069 20.541039 7.0379053 19.962891 7.0097656 C 19.952471 6.9330339 19.936267 6.8574112 19.921875 6.78125 A 0.75009143 0.75009143 0 0 0 19.876953 6.578125 C 19.562748 5.2468807 18.666561 4.0141828 17.484375 3.0429688 C 16.262685 2.0393005 14.710035 1.3032784 13.052734 1.0761719 A 0.750075 0.750075 0 0 0 13.033203 1.0742188 C 12.693231 1.0284834 12.350851 0.99609375 12.003906 0.99609375 z M 12.003906 2.4960938 C 12.085278 2.4960938 12.166549 2.5043971 12.248047 2.5078125 L 12.814453 7.4511719 C 12.543666 7.4630055 12.258757 7.4902344 12.001953 7.4902344 C 11.745807 7.4902344 11.461377 7.4629264 11.191406 7.4511719 L 11.757812 2.5078125 C 11.839971 2.5043424 11.921882 2.4960937 12.003906 2.4960938 z M 10.21875 2.7597656 L 9.6953125 7.3359375 C 8.2362752 7.1686236 6.7814296 6.870302 5.7519531 6.4453125 C 6.0643992 5.6697916 6.6585209 4.8712987 7.4746094 4.2011719 C 8.253808 3.5613368 9.2086793 3.0501785 10.21875 2.7597656 z M 13.787109 2.7597656 C 14.796755 3.0501533 15.752326 3.5612538 16.53125 4.2011719 C 17.346418 4.8708655 17.942533 5.6683911 18.255859 6.4433594 C 17.226484 6.8689058 15.770072 7.1682991 14.310547 7.3359375 L 13.787109 2.7597656 z M 5.5019531 7.9609375 C 7.3644708 8.6744926 9.7873928 8.9667782 11.865234 8.9785156 A 0.750075 0.750075 0 0 0 12.001953 8.9902344 A 0.750075 0.750075 0 0 0 12.138672 8.9785156 A 0.750075 0.750075 0 0 0 12.150391 8.9765625 C 14.224851 8.963826 16.645473 8.6731442 18.505859 7.9609375 L 18.505859 10.242188 C 15.579483 12.147688 13.705061 14.71968 13.001953 17.853516 L 13.001953 14 C 13.001953 12.587 14.462953 11.667 16.001953 11 C 16.844953 10.64 18.001953 9.867 18.001953 9 C 16.126953 9.667 14.489953 10 12.001953 10 C 9.5139531 10 7.8789062 9.667 6.0039062 9 C 6.0039062 9.867 7.1609063 10.64 8.0039062 11 C 9.5429063 11.667 11.003906 12.587 11.003906 14 L 11.003906 17.865234 C 10.303293 14.727029 8.4304677 12.15182 5.5019531 10.244141 L 5.5019531 7.9609375 z M 18.505859 12.050781 L 18.505859 15.359375 C 18.505859 15.811372 18.340133 16.184807 17.994141 16.566406 C 17.648149 16.948005 17.11315 17.30994 16.462891 17.603516 C 15.862793 17.874444 15.165811 18.080045 14.453125 18.230469 C 14.989184 15.731205 16.309074 13.695883 18.505859 12.050781 z M 5.5019531 12.052734 C 7.69611 13.696965 9.0147469 15.731429 9.5507812 18.228516 C 8.8400634 18.07817 8.1437816 17.873744 7.5449219 17.603516 C 6.8942441 17.309905 6.3580233 16.948053 6.0117188 16.566406 C 5.665414 16.184759 5.5019531 15.81118 5.5019531 15.359375 L 5.5019531 12.052734 z M 8.40625 19.494141 C 8.9801759 19.657074 9.5652232 19.772948 10.150391 19.855469 A 0.750075 0.750075 0 0 0 10.601562 19.919922 C 11.080213 19.971386 11.552764 20.003906 12.003906 20.003906 C 12.455241 20.003906 12.92758 19.971365 13.40625 19.919922 A 0.750075 0.750075 0 0 0 13.853516 19.855469 C 14.440155 19.772962 15.026332 19.657461 15.601562 19.494141 C 14.774387 20.722145 13.465203 21.503906 12.003906 21.503906 C 10.541725 21.503906 9.2333403 20.722224 8.40625 19.494141 z"></path>
          </svg>
        </div>

        <div class="user-details">
          <div class="user-field">
            <span class="field-label">Username:</span>
            <span class="field-value">{{ user.username }}</span>
          </div>

          <div class="user-field">
            <span class="field-label">Email:</span>
            <span class="field-value">{{ user.email }}</span>
          </div>

          <div class="user-field" *ngIf="user.emailConfirmed !== undefined">
            <span class="field-label">Email Status:</span>
            <span class="field-value">
              <span *ngIf="user.emailConfirmed" class="status-badge confirmed">Confirmed</span>
              <span *ngIf="!user.emailConfirmed" class="status-badge pending">Pending</span>
            </span>
          </div>

          <div class="user-field" *ngIf="user.creationTimestamp">
            <span class="field-label">Member Since:</span>
            <span class="field-value">{{ user.creationTimestamp | date:'medium' }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="dialog-actions">
      <button class="btn btn-secondary btn-modal" (click)="onClose()">
        Close
      </button>
      <button class="btn btn-primary btn-modal" (click)="onLogout()">
        Logout
      </button>
    </div>
  </div>
</div>
