<div >
  <div class="breadcrumb-island">
      <nav class="breadcrumb">
          <div class="breadcrumb-item">
              <a href="#">TestFarm</a>
          </div>
          <svg xmlns="http://www.w3.org/2000/svg" class="breadcrumb-separator" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
          </svg>
          <div class="breadcrumb-item active">
              Artifacts Definitions
          </div>
      </nav>
  </div>
  <div class="islands-grid">
      <div class="island island-large">
          <button class="btn btn-primary" (click)="addArtifactDefinition()">
            <svg width="16" height="16" fill="currentColor" stroke="none" viewBox="0 0 24 24">
                <path d="M 5.25 2 C 4.0162029 2 3 3.0162029 3 4.25 L 3 19.75 C 3 20.983797 4.0162029 22 5.25 22 L 12 22 A 0.750075 0.750075 0 1 0 12 20.5 L 5.25 20.5 C 4.8277971 20.5 4.5 20.172203 4.5 19.75 L 4.5 4.25 C 4.5 3.8277971 4.8277971 3.5 5.25 3.5 L 13 3.5 L 13 7.25 A 0.750075 0.750075 0 0 0 13.75 8 L 17.5 8 L 17.5 11.75 A 0.750075 0.750075 0 1 0 19 11.75 L 19 6.75 A 0.750075 0.750075 0 0 0 18.78125 6.21875 L 14.78125 2.21875 A 0.750075 0.750075 0 0 0 14.25 2 L 5.25 2 z M 14.5 4.0605469 L 16.939453 6.5 L 14.5 6.5 L 14.5 4.0605469 z M 8 10 A 1 1 0 0 0 8 12 A 1 1 0 0 0 8 10 z M 10.75 10.25 A 0.750075 0.750075 0 1 0 10.75 11.75 L 14.25 11.75 A 0.750075 0.750075 0 1 0 14.25 10.25 L 10.75 10.25 z M 8 13 A 1 1 0 0 0 8 15 A 1 1 0 0 0 8 13 z M 10.75 13.25 A 0.750075 0.750075 0 1 0 10.75 14.75 L 13.5 14.75 A 0.750075 0.750075 0 1 0 13.5 13.25 L 10.75 13.25 z M 19 14 C 16.239 14 14 16.239 14 19 C 14 21.761 16.239 24 19 24 C 21.761 24 24 21.761 24 19 C 24 16.239 21.761 14 19 14 z M 8 16 A 1 1 0 0 0 8 18 A 1 1 0 0 0 8 16 z M 19 16 C 19.345 16 19.625 16.28 19.625 16.625 L 19.625 18.375 L 21.375 18.375 C 21.72 18.375 22 18.655 22 19 C 22 19.345 21.72 19.625 21.375 19.625 L 19.625 19.625 L 19.625 21.375 C 19.625 21.72 19.345 22 19 22 C 18.655 22 18.375 21.72 18.375 21.375 L 18.375 19.625 L 16.625 19.625 C 16.28 19.625 16 19.345 16 19 C 16 18.655 16.28 18.375 16.625 18.375 L 18.375 18.375 L 18.375 16.625 C 18.375 16.28 18.655 16 19 16 z M 10.75 16.25 A 0.750075 0.750075 0 1 0 10.75 17.75 L 12.25 17.75 A 0.750075 0.750075 0 1 0 12.25 16.25 L 10.75 16.25 z"></path>
            </svg>
            Create Artifact Definition
          </button>
            <button class="btn btn-secondary" [disabled]="selectedArtifactsNumber !== 1" (click)="addArtifact()">
            <svg width="16" height="16" fill="currentColor" stroke="none" viewBox="0 0 24 24">
                <path d="M 12 2 C 6.4860328 2 2 6.4860368 2 12 C 2 17.513963 6.4860328 22 12 22 C 17.513967 22 22 17.513963 22 12 C 22 6.4860368 17.513967 2 12 2 z M 12 3.5 C 16.703308 3.5 20.5 7.2966955 20.5 12 C 20.5 16.703304 16.703308 20.5 12 20.5 C 7.2966924 20.5 3.5 16.703304 3.5 12 C 3.5 7.2966955 7.2966924 3.5 12 3.5 z M 11.988281 6.9902344 A 0.750075 0.750075 0 0 0 11.25 7.75 L 11.25 11.25 L 7.75 11.25 A 0.750075 0.750075 0 1 0 7.75 12.75 L 11.25 12.75 L 11.25 16.25 A 0.750075 0.750075 0 1 0 12.75 16.25 L 12.75 12.75 L 16.25 12.75 A 0.750075 0.750075 0 1 0 16.25 11.25 L 12.75 11.25 L 12.75 7.75 A 0.750075 0.750075 0 0 0 11.988281 6.9902344 z"></path>
            </svg>
            Add Artifact
          </button>
          <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
              <div style="flex: 1; min-width: 200px;">
                  <input type="text" id="dataSearch" placeholder="Search..."
                      [(ngModel)]="searchTerm"
                      (input)="onSearchChange($event)"
                      style="width: 100%; padding: 0.75rem; border: 1px solid #e9ecef; border-radius: 8px; background: linear-gradient(315deg, #f8f9fa 0%, #ffffff 100%); font-size: 0.875rem; transition: all 0.2s ease;">
              </div>
          </div>
          <div style="overflow-x: auto; background: linear-gradient(315deg, #f8f9fa 0%, #ffffff 100%); border-radius: 8px; border: 1px solid #e9ecef;">
              <table id="artifactsDefinitionsTable" style="width: 100%; border-collapse: collapse;">
                  <thead>
                      <tr style="background: linear-gradient(315deg, #f0f1f2 0%, #ffffff 100%); border-bottom: 2px solid #e9ecef;  font-size: small;">
                          <th class="column fit-content">

                          </th>

                          <th class="column-sortable fit-content" data-sort="id"
                            (click)="sortTable('id')">
                              Id
                              <svg style="width: 12px; height: 12px; display: inline-block; margin-left: 0.5rem; opacity: 0.5;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                              </svg>
                            </th>
                          <th class="column-sortable" data-sort="name" style="text-align: center;"
                          (click)="sortTable('name')">
                              Name
                              <svg style="width: 12px; height: 12px; display: inline-block; margin-left: 0.5rem; opacity: 0.5;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                              </svg>
                          </th>
                          <th class="column">
                              Tags
                          </th>
                          <th class="column">
                              Latest Version
                          </th>
                          <th class="column fit-content">

                          </th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let row of filteredArtifactsRows" style="border-bottom: 1px solid #f5f5f5; transition: all 0.3s ease; cursor: pointer;"
                        (mouseover)="onRowMouseOver(row, $event)"
                        (mouseout)="onRowMouseOut(row, $event)"
                        (click)="markRowReviewed(row, $event)"
                        (dblclick)="removeRowFromReviewed(row, $event)">
                        <td class="cell">
                          <input type="checkbox" style="margin: 0; transform: scale(1.2);" (change)="onSelectionChange(row, $event)"/>
                        </td>
                        <td class="cell">
                           {{row.artifact.Id}}
                        </td>
                        <td class="cell">
                          <div style="display: flex; gap: 5px; justify-content: center; align-items: center;">
                          <a [routerLink]="['/artifacts', row.artifact.Id]" class="row-link">
                          {{row.artifact.Name}}
                          </a>
                          <a href="#" class="row-action-link" data-tooltip="Notes">
                            <svg xmlns="http://www.w3.org/2000/svg" class="" fill="currentColor" stroke="none" x="0px" y="0px" width="22" height="22" viewBox="0 0 24 24">
                              <path d="M 3.75 3 A 0.750075 0.750075 0 0 0 3 3.75 L 3 20.25 A 0.750075 0.750075 0 0 0 3.75 21 L 16.25 21 A 0.750075 0.750075 0 0 0 16.78125 20.78125 L 20.78125 16.78125 A 0.750075 0.750075 0 0 0 21 16.25 L 21 3.75 A 0.750075 0.750075 0 0 0 20.25 3 L 3.75 3 z M 4.5 4.5 L 19.5 4.5 L 19.5 15 L 15.75 15 A 0.750075 0.750075 0 0 0 15 15.75 L 15 19.5 L 4.5 19.5 L 4.5 4.5 z M 7.75 7 A 0.750075 0.750075 0 1 0 7.75 8.5 L 16.25 8.5 A 0.750075 0.750075 0 1 0 16.25 7 L 7.75 7 z M 7.75 11 A 0.750075 0.750075 0 1 0 7.75 12.5 L 12.25 12.5 A 0.750075 0.750075 0 1 0 12.25 11 L 7.75 11 z M 16.5 16.5 L 18.939453 16.5 L 16.5 18.939453 L 16.5 16.5 z"></path>
                            </svg>
                          </a>
                          <a href="#" class="row-action-link" data-tooltip="Links">
                            <svg xmlns="http://www.w3.org/2000/svg" class="" fill="currentColor" stroke="none" x="0px" y="0px" width="22" height="22" viewBox="0 0 24 24">
                              <path d="M 16.431641 2.0039062 C 15.004644 2.0039062 13.576524 2.5465218 12.492188 3.6308594 L 10.220703 5.9023438 A 0.750075 0.750075 0 1 0 11.28125 6.9628906 L 13.552734 4.6914062 C 15.148059 3.0960813 17.713269 3.0960813 19.308594 4.6914062 C 20.903919 6.2867312 20.903919 8.8519403 19.308594 10.447266 L 17.037109 12.71875 A 0.750075 0.750075 0 1 0 18.097656 13.779297 L 20.369141 11.507812 C 22.537816 9.3391379 22.537816 5.7995344 20.369141 3.6308594 C 19.284803 2.5465218 17.858637 2.0039063 16.431641 2.0039062 z M 15.234375 7.9921875 A 0.750075 0.750075 0 0 0 14.71875 8.21875 L 8.21875 14.71875 A 0.75130096 0.75130096 0 1 0 9.28125 15.78125 L 15.78125 9.28125 A 0.750075 0.750075 0 0 0 15.234375 7.9921875 z M 6.4257812 9.9882812 A 0.750075 0.750075 0 0 0 5.9101562 10.214844 L 3.6308594 12.492188 C 1.4621843 14.660863 1.4621843 18.200466 3.6308594 20.369141 C 5.7995344 22.537816 9.3391379 22.537816 11.507812 20.369141 L 13.992188 17.886719 A 0.750075 0.750075 0 1 0 12.931641 16.826172 L 10.447266 19.308594 C 8.8519403 20.903919 6.2867312 20.903919 4.6914062 19.308594 C 3.0960813 17.713269 3.0960813 15.148059 4.6914062 13.552734 L 6.9707031 11.275391 A 0.750075 0.750075 0 0 0 6.4257812 9.9882812 z"></path>
                            </svg>
                          </a>
                        </div>
                        </td>
                        <td class="cell" style="color: #6c757d;">
                            <span *ngFor="let tag of row.artifact.Tags" style="padding: 0.25rem 0.75rem; margin-right: 0.25rem; background: linear-gradient(315deg, #e9ecef 0%, #f8f9fa 100%); border-radius: 12px; font-size: 0.75rem; font-weight: 600; border: 1px solid #dee2e6;">{{tag}}</span>
                        </td>
                        <td class="cell" style="font-weight: 500; color: #2c3e50;">
                           {{ row.artifact.LatestBuild?.BuildName || 'N/A' }}
                        </td>
                        <td class="cell" style="font-weight: 500; color: #2c3e50;">
                            <div style="display: flex; gap: 10px; justify-content: center; align-items: center;">
                              <a href="#" class="row-action-link" data-tooltip="Hide">
                                  <svg xmlns="http://www.w3.org/2000/svg" class="" fill="currentColor" stroke="none" x="0px" y="0px" width="22" height="22" viewBox="0 0 24 24">
                                    <path d="M 1.7421875 0.9921875 A 0.750075 0.750075 0 0 0 1.21875 2.28125 L 4.78125 5.84375 C 1.7144403 8.3819966 0.076171875 11.671875 0.076171875 11.671875 A 0.750075 0.750075 0 0 0 0.07421875 12.326172 C 0.07421873 12.326172 4.1708964 21 12 21 C 14.345073 21 16.345405 20.168101 18.007812 19.070312 L 21.71875 22.78125 A 0.75130096 0.75130096 0 1 0 22.78125 21.71875 L 2.28125 1.21875 A 0.750075 0.750075 0 0 0 1.7421875 0.9921875 z M 12 3 C 10.78172 3 9.6606832 3.2331341 8.6347656 3.5878906 A 0.75016086 0.75016086 0 1 0 9.125 5.0058594 C 10.025082 4.6946159 10.97228 4.5 12 4.5 C 18.206232 4.5 21.848953 10.992025 22.367188 11.970703 C 22.235599 12.230883 21.536914 13.669939 19.957031 15.431641 A 0.7503364 0.7503364 0 1 0 21.074219 16.433594 C 22.937735 14.355617 23.923828 12.328125 23.923828 12.328125 A 0.750075 0.750075 0 0 0 23.925781 11.673828 C 23.925734 11.673828 19.829104 3 12 3 z M 5.8554688 6.9179688 L 8 9.0625 C 7.3913107 9.8845814 7 10.890398 7 12 C 7 14.752411 9.2475888 17 12 17 C 13.109602 17 14.115419 16.608689 14.9375 16 L 16.90625 17.96875 C 15.490882 18.851043 13.884696 19.5 12 19.5 C 5.7636654 19.5 2.1079824 12.934883 1.6191406 12.007812 C 1.855615 11.550495 3.2725629 9.019239 5.8554688 6.9179688 z M 12.361328 7.0351562 A 0.750075 0.750075 0 0 0 12.304688 8.5332031 C 13.995351 8.6810434 15.318957 10.004649 15.466797 11.695312 A 0.750075 0.750075 0 1 0 16.960938 11.564453 C 16.750778 9.1611179 14.838882 7.2492223 12.435547 7.0390625 A 0.750075 0.750075 0 0 0 12.361328 7.0351562 z M 9.0683594 10.130859 L 13.869141 14.931641 C 13.325468 15.286116 12.693023 15.5 12 15.5 C 10.058411 15.5 8.5 13.941589 8.5 12 C 8.5 11.306977 8.7138842 10.674532 9.0683594 10.130859 z"></path>
                                  </svg>
                                </a>
                                <a href="#" class="row-action-link" data-tooltip="Edit" (click)="editArtifactDefinition(row.artifact); $event.stopPropagation();">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="" fill="currentColor" stroke="none" x="0px" y="0px" width="22" height="22" viewBox="0 0 24 24">
                                        <path d="M 18.027344 2.0625 A 0.750075 0.750075 0 0 0 17.474609 2.28125 L 3.1953125 16.560547 A 0.750075 0.750075 0 0 0 2.9941406 16.925781 L 2.0683594 21.035156 A 0.750075 0.750075 0 0 0 2.9648438 21.931641 L 7.0742188 21.005859 A 0.750075 0.750075 0 0 0 7.4394531 20.804688 L 21.71875 6.5253906 A 0.750075 0.750075 0 0 0 21.931641 5.8984375 C 21.931641 5.8984375 21.757842 4.4961237 20.630859 3.3691406 C 19.503876 2.2421576 18.101562 2.0683594 18.101562 2.0683594 A 0.750075 0.750075 0 0 0 18.027344 2.0625 z M 18.177734 3.6992188 C 18.402665 3.7448027 18.944619 3.803994 19.570312 4.4296875 C 20.196006 5.055381 20.255198 5.5973355 20.300781 5.8222656 L 18.550781 7.5722656 L 16.427734 5.4492188 L 18.177734 3.6992188 z M 15.367188 6.5097656 L 17.490234 8.6328125 L 6.5332031 19.589844 L 3.7929688 20.208984 L 4.4101562 17.466797 L 15.367188 6.5097656 z"></path>
                                    </svg>
                                </a>
                                <a href="#" class="row-action-link" data-tooltip="Remove">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="" fill="currentColor" stroke="none" x="0px" y="0px" width="22" height="22" viewBox="0 0 24 24">
                                        <path d="M 8.8632812 2 L 8.3652344 5 L 8 5 L 2.0058594 5 L 2.0058594 6.5 L 2.796875 6.5 L 3.8320312 22 L 12 22 L 12 20.5 L 5.2167969 20.5 L 4.3007812 6.5 L 8 6.5 L 9 6.5 L 14.996094 6.5 L 16 6.5 L 19.699219 6.5 L 19.306641 11.992188 L 20.820312 12 L 21.203125 6.5 L 22 6.5 L 22.003906 5 L 16 5 L 15.634766 5 L 15.136719 2 L 8.8632812 2 z M 10.134766 3.5 L 13.865234 3.5 L 14.115234 5 L 9.8847656 5 L 10.134766 3.5 z M 6.9453125 9.0019531 L 7.5761719 18.003906 L 9.0722656 18.003906 L 8.453125 9.0039062 L 6.9453125 9.0019531 z M 11.25 9.0078125 L 11.25 18.005859 L 12.75 18.005859 L 12.75 9.0078125 L 11.25 9.0078125 z M 15.585938 9.0078125 L 15.298828 12 L 16.804688 12 L 17.089844 9.0078125 L 15.585938 9.0078125 z M 19 14 C 17.72025 14 16.440844 14.488844 15.464844 15.464844 C 13.512844 17.416844 13.512844 20.583156 15.464844 22.535156 C 17.416844 24.487156 20.583156 24.487156 22.535156 22.535156 C 24.487156 20.583156 24.487156 17.417844 22.535156 15.464844 C 21.559156 14.488844 20.27975 14 19 14 z M 17.300781 16.417969 L 19 18.115234 L 20.693359 16.421875 L 21.578125 17.306641 L 19.884766 19 L 21.566406 20.683594 L 20.681641 21.566406 L 19 19.884766 L 17.320312 21.564453 L 16.435547 20.679688 L 18.115234 19 L 16.417969 17.300781 L 17.300781 16.417969 z"></path>
                                    </svg>
                                </a>

                            </div>
                        </td>
                    </tr>
                  </tbody>
              </table>
          </div>
          <div id="noResults" *ngIf="filteredArtifactsRows.length === 0" style="text-align: center; padding: 2rem; color: #6c757d;">
              <svg style="width: 48px; height: 48px; margin-bottom: 1rem; opacity: 0.5;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.467.881-6.077 2.33l-.853-.894A9.96 9.96 0 0112 13.5a9.96 9.96 0 016.93 2.936l-.853.894z"></path>
              </svg>
              <div>{{ searchTerm ? 'No artifacts match your search criteria' : 'No artifacts found' }}</div>
          </div>
      </div>
  </div>
</div>

<app-add-artifact-definition-dialog
  *ngIf="showAddArtifactDefinitionDialog"
  (artifactDefinitionAdded)="artifactDefinitionAdded($event)"
  (artifactDefinitionDialogClosed)="artifactDefinitionDialogClosed()">
</app-add-artifact-definition-dialog>

<app-edit-artifact-definition-dialog
  *ngIf="showEditArtifactDefinitionDialog"
  [artifactDefinition]="artifactDefinitionToEdit"
  (artifactDefinitionChanged)="artifactDefinitionChanged($event)"
  (editArtifactDefinitionDialogClosed)="editArtifactDefinitionDialogClosed()">
</app-edit-artifact-definition-dialog>

<app-add-artifact-dialog
  *ngIf="showAddArtifactDialog"
  [artifactDefinitionId]="getSelectedRow()?.artifact?.Id"
  [artifactDefinitionName]="getSelectedRow()?.artifact?.Name"
  (artifactAdded)="artifactAdded($event)"
  (artifactDialogClosed)="artifactDialogClosed()">
</app-add-artifact-dialog>
