<div class="dialog-overlay" (click)="onCancel()">
  <div class="dialog-container" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <div>
        <h2 class="dialog-title" style="width: 100%;">Add Artifact</h2>
        <div class="dialog-subtitle" style="margin-top: 0.5rem; font-size: small; color: #6c757d;">for {{ artifactDefinitionName }}</div>
      </div>
      <button class="close-btn" (click)="onCancel()" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <div class="dialog-content">
      <form [formGroup]="artifactForm">
        <!-- Build ID Field -->
        <div class="form-field">
          <label class="form-label" for="buildId">Build ID <span class="required">*</span></label>
          <input
            id="buildId"
            type="text"
            class="form-input"
            [class.form-input-error]="isFieldInvalid('buildId')"
            formControlName="buildId"
            placeholder="Enter build ID">
          <div class="form-error" *ngIf="isFieldInvalid('buildId')">
            {{ getFieldError('buildId') }}
          </div>
        </div>

        <!-- Build Name Field -->
        <div class="form-field">
          <label class="form-label" for="buildName">Build Name <span class="required">*</span></label>
          <input
            id="buildName"
            type="text"
            class="form-input"
            [class.form-input-error]="isFieldInvalid('buildName')"
            formControlName="buildName"
            placeholder="Enter build name">
          <div class="form-error" *ngIf="isFieldInvalid('buildName')">
            {{ getFieldError('buildName') }}
          </div>
        </div>

        <!-- Repository Field -->
        <div class="form-field">
          <label class="form-label" for="repository">Repository <span class="required">*</span></label>
          <input
            id="repository"
            type="text"
            class="form-input"
            [class.form-input-error]="isFieldInvalid('repository')"
            formControlName="repository"
            placeholder="Enter repository">
          <div class="form-error" *ngIf="isFieldInvalid('repository')">
            {{ getFieldError('repository') }}
          </div>
        </div>

        <!-- Branch Field -->
        <div class="form-field">
          <label class="form-label" for="branch">Branch <span class="required">*</span></label>
          <input
            id="branch"
            type="text"
            class="form-input"
            [class.form-input-error]="isFieldInvalid('branch')"
            formControlName="branch"
            placeholder="Enter branch">
          <div class="form-error" *ngIf="isFieldInvalid('branch')">
            {{ getFieldError('branch') }}
          </div>
        </div>

        <!-- Revision Field -->
        <div class="form-field">
          <label class="form-label" for="revision">Revision <span class="required">*</span></label>
          <input
            id="revision"
            type="text"
            class="form-input"
            [class.form-input-error]="isFieldInvalid('revision')"
            formControlName="revision"
            placeholder="Enter revision">
          <div class="form-error" *ngIf="isFieldInvalid('revision')">
            {{ getFieldError('revision') }}
          </div>
        </div>

        <!-- Work Item URL Field -->
        <div class="form-field">
          <label class="form-label" for="workItemUrl">Work Item URL <span class="required">*</span></label>
          <input
            id="workItemUrl"
            type="text"
            class="form-input"
            [class.form-input-error]="isFieldInvalid('workItemUrl')"
            formControlName="workItemUrl"
            placeholder="Enter work item URL">
          <div class="form-error" *ngIf="isFieldInvalid('workItemUrl')">
            {{ getFieldError('workItemUrl') }}
          </div>
        </div>

        <!-- Build Page URL Field -->
        <div class="form-field">
          <label class="form-label" for="buildPageUrl">Build Page URL <span class="required">*</span></label>
          <input
            id="buildPageUrl"
            type="text"
            class="form-input"
            [class.form-input-error]="isFieldInvalid('buildPageUrl')"
            formControlName="buildPageUrl"
            placeholder="Enter build page URL">
          <div class="form-error" *ngIf="isFieldInvalid('buildPageUrl')">
            {{ getFieldError('buildPageUrl') }}
          </div>
        </div>

        <!-- Tags Field -->
        <div class="form-field">
          <label class="form-label" for="tagInput">Tags</label>
          <div class="tags-container">
            <!-- Existing Tags -->
            <div class="tags-list" *ngIf="tags.length > 0">
              <span *ngFor="let tag of tags" class="tag-chip">
                {{ tag }}
                <button type="button" class="tag-remove" (click)="removeTag(tag)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                  </svg>
                </button>
              </span>
            </div>
            <!-- Tag Input -->
            <div class="tag-input-container">
              <input
                id="tagInput"
                type="text"
                class="form-input tag-input"
                [(ngModel)]="newTagInput"
                [ngModelOptions]="{standalone: true}"
                (keydown)="onTagInputKeyDown($event)"
                placeholder="Add tag and press Enter">
              <button type="button" class="add-tag-btn" (click)="addTag()" [disabled]="!newTagInput.trim()">
                Add
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="dialog-actions">
      <button class="btn btn-secondary btn-modal" (click)="onCancel()">
        Cancel
      </button>
      <button class="btn btn-primary btn-modal" [disabled]="artifactForm.invalid" (click)="onSubmit()">
        Add
      </button>

      <!-- <button type="button" class="btn btn-secondary" (click)="onCancel()">
        Cancel
      </button>
      <button
        type="button"
        class="btn btn-primary"
        [disabled]="artifactForm.invalid"
        (click)="onSubmit()">
        Create Artifact
      </button> -->
    </div>
  </div>
</div>
